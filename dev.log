
> dev
> shopify app dev

╭─ info ───────────────────────────────────────────────────────────────────────╮
│                                                                              │
│  Using shopify.app.toml for default values:                                  │
│                                                                              │
│    • Org:             Catsler LLC                                            │
│    • App:             Lightsler Ai                                           │
│    • Dev store:       lightsler-ai.myshopify.com                             │
│    • Update URLs:     Yes                                                    │
│                                                                              │
│   You can pass `--reset` to your command to reset your app configuration.    │
│                                                                              │
╰──────────────────────────────────────────────────────────────────────────────╯

Running pre-dev command: "npx prisma generate"GraphiQL server started on port 3457Proxy server started on port 61229 Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma
Datasource "db": SQLite database "dev.sqlite" at "file:dev.sqlite"

1 migration found in prisma/migrations


No pending migrations to apply.
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
  ➜  Local:   http://localhost:61234/
  ➜  Network: use --host to expose
[shopify-api/INFO] version 11.14.1, environment Remix
📋 应用配置摘要:
- 环境: development
- 端口: 61234
- 数据库: file:./dev.db
- Redis: 已启用
- 翻译API: https://us.vveai.com/v1
- 翻译模型: gpt-4o
- API密钥: 已配置
- 队列并发数: 5
🚀 翻译队列已启动: Redis模式
API操作 - 扫描资源: {
  operation: '扫描资源',
  shopDomain: '',
  details: { status: 'started' },
  success: true,
  timestamp: '2025-08-04T09:20:54.152Z'
}
API操作 - 扫描资源: {
  operation: '扫描资源',
  shopDomain: '',
  details: { status: 'failed', error: 'HTTP 410 Gone' },
  success: false,
  timestamp: '2025-08-04T09:20:54.154Z'
}
API错误: {
  message: '扫描资源失败: HTTP 410 Gone',
  error: 'HTTP 410 Gone',
  timestamp: '2025-08-04T09:20:54.154Z'
}
[shopify-app/INFO] Redirecting login request to https://admin.shopify.com/store/lightsler-ai/oauth/install?client_id=8102af9807fd9df0b322a44f500a1d0e | {shop: lightsler-ai.myshopify.com}
[shopify-app/INFO] Authenticating admin request | {shop: lightsler-ai.myshopify.com}
[shopify-app/INFO] Authenticating admin request | {shop: lightsler-ai.myshopify.com}
[shopify-app/INFO] Authenticating admin request | {shop: null}
正在测试翻译API连通性...
✅ 翻译API配置验证通过
[shopify-app/INFO] Authenticating admin request | {shop: null}
[shopify-app/INFO] Authenticating admin request | {shop: null}
API操作 - 清理数据: {
  operation: '清理数据',
  shopDomain: '',
  details: { status: 'started' },
  success: true,
  timestamp: '2025-08-04T09:24:54.681Z'
}
[shopify-app/INFO] Authenticating admin request | {shop: null}
API操作 - 清理数据: {
  operation: '清理数据',
  shopDomain: '',
  details: { status: 'completed' },
  success: true,
  timestamp: '2025-08-04T09:25:25.276Z'
}
[shopify-app/INFO] Authenticating admin request | {shop: null}
[shopify-app/INFO] Authenticating admin request | {shop: lightsler-ai.myshopify.com}
[shopify-app/INFO] Authenticating admin request | {shop: lightsler-ai.myshopify.com}
[shopify-app/INFO] Authenticating admin request | {shop: null}
[shopify-app/INFO] Authenticating admin request | {shop: null}
[shopify-app/INFO] Authenticating admin request | {shop: null}
[shopify-app/INFO] Authenticating admin request | {shop: null}
5:37:09 PM [vite] page reload app/services/translation.server.js
5:37:20 PM [vite] page reload app/services/translation.server.js
Redis连接失败，切换到内存模式
/Users/Administrator/translate/app/services/queue.server.js:47
      if (!redis._isConnected) {
                 ^

TypeError: Cannot read properties of null (reading '_isConnected')
    at EventEmitter.eval (/Users/Administrator/translate/app/services/queue.server.js:47:18)
    at EventEmitter.emit (node:events:518:28)
    at EventEmitter.silentEmit (/Users/Administrator/translate/node_modules/ioredis/built/Redis.js:482:30)
    at Socket.<anonymous> (/Users/Administrator/translate/node_modules/ioredis/built/redis/event_handler.js:196:14)
    at Object.onceWrapper (node:events:633:26)
    at Socket.emit (node:events:530:35)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at processTicksAndRejections (node:internal/process/task_queues:90:21)

Node.js v22.17.1
── external error ──────────────────────────────────────────────────────────────

Error coming from `npm exec remix vite:dev`

Command failed with exit code 1: npm exec remix vite:dev
The CJS build of Vite's Node API is deprecated. See 
https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for 
more details.
API操作 - 扫描资源: {
  operation: '扫描资源',
  shopDomain: '',
  details: { status: 'failed', error: 'HTTP 410 Gone' },
  success: false,
  timestamp: '2025-08-04T09:20:54.154Z'
}
API错误: {
  message: '扫描资源失败: HTTP 410 Gone',
  error: 'HTTP 410 Gone',
  timestamp: '2025-08-04T09:20:54.154Z'
}
Redis连接失败，切换到内存模式
/Users/Administrator/translate/app/services/queue.server.js:47
      if (!redis._isConnected) {
                 ^

TypeError: Cannot read properties of null (reading '_isConnected')
    at EventEmitter.eval
(/Users/Administrator/translate/app/services/queue.server.js:47:18)
    at EventEmitter.emit (node:events:518:28)
    at EventEmitter.silentEmit
(/Users/Administrator/translate/node_modules/ioredis/built/Redis.js:482:30)
    at Socket.<anonymous> (/Users/Administrator/translate/node_modules/ioredis/b
uilt/redis/event_handler.js:196:14)
    at Object.onceWrapper (node:events:633:26)
    at Socket.emit (node:events:530:35)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at processTicksAndRejections (node:internal/process/task_queues:90:21)

Node.js v22.17.1
  ➜  Local:   http://localhost:61234/
  ➜  Network: use --host to expose
[shopify-api/INFO] version 11.14.1, environment Remix
📋 应用配置摘要:
- 环境: development
- 端口: 61234
- 数据库: file:./dev.db
- Redis: 已启用
- 翻译API: https://us.vveai.com/v1
- 翻译模型: gpt-4o
- API密钥: 已配置
- 队列并发数: 5
🚀 翻译队列已启动: Redis模式
API操作 - 扫描资源: {
  operation: '扫描资源',
  shopDomain: '',
  details: { status: 'started' },
  success: true,
  timestamp: '2025-08-04T09:20:54.152Z'
}
[shopify-app/INFO] Redirecting login request to https://admin.shopify.com/store/
lightsler-ai/oauth/install?client_id=8102af9807fd9df0b322a44f500a1d0e | {shop:
lightsler-ai.myshopify.com}
[shopify-app/INFO] Authenticating admin request | {shop:
lightsler-ai.myshopify.com}
[shopify-app/INFO] Authenticating admin request | {shop:
lightsler-ai.myshopify.com}
[shopify-app/INFO] Authenticating admin request | {shop: null}
正在测试翻译API连通性...
✅ 翻译API配置验证通过
[shopify-app/INFO] Authenticating admin request | {shop: null}
[shopify-app/INFO] Authenticating admin request | {shop: null}
API操作 - 清理数据: {
  operation: '清理数据',
  shopDomain: '',
  details: { status: 'started' },
  success: true,
  timestamp: '2025-08-04T09:24:54.681Z'
}
[shopify-app/INFO] Authenticating admin request | {shop: null}
API操作 - 清理数据: {
  operation: '清理数据',
  shopDomain: '',
  details: { status: 'completed' },
  success: true,
  timestamp: '2025-08-04T09:25:25.276Z'
}
[shopify-app/INFO] Authenticating admin request | {shop: null}
[shopify-app/INFO] Authenticating admin request | {shop:
lightsler-ai.myshopify.com}
[shopify-app/INFO] Authenticating admin request | {shop:
lightsler-ai.myshopify.com}
[shopify-app/INFO] Authenticating admin request | {shop: null}
[shopify-app/INFO] Authenticating admin request | {shop: null}
[shopify-app/INFO] Authenticating admin request | {shop: null}
[shopify-app/INFO] Authenticating admin request | {shop: null}
5:37:09 PM [vite] page reload app/services/translation.server.js
5:37:20 PM [vite] page reload app/services/translation.server.js

────────────────────────────────────────────────────────────────────────────────

Error: read ECONNRESET
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:216:20)
    at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17)
